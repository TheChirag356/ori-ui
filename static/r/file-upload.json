{
	"$schema": "https://shadcn-svelte.com/schema/registry-item.json",
	"name": "file-upload",
	"title": "File Upload",
	"type": "registry:block",
	"author": "Chirag Arora <arorachirag12005@gmail.com>",
	"description": "",
	"dependencies": [
		"@tabler/icons-svelte"
	],
	"meta": {
		"author": "TheChirag356",
		"version": "1.0.0",
		"documentation": "https://www.oriui.app/components/file-upload",
		"repository": "https://github.com/TheChirag356/ori-ui"
	},
	"files": [
		{
			"content": "<script lang=\"ts\" module>\r\n    import { cn } from \"$LIB$/utils\";\r\n    import { IconLoader, IconUpload, IconX, IconXboxXFilled } from '@tabler/icons-svelte';\r\n\timport { fly } from \"svelte/transition\";\r\n\r\n    export type FileUploadProps = {\r\n        class?: string;\r\n        accept?: string;\r\n        multiple?: boolean;\r\n        onFileChange?: (files: File[]) => void;\r\n        description?: string | {\r\n            fileTypes?: string;\r\n            maxFileSize?: string;\r\n            maxFiles?: number;\r\n        };\r\n    }\r\n</script>\r\n\r\n<script lang=\"ts\">\r\n    import {onMount} from 'svelte';\r\n\timport { slide } from \"svelte/transition\";\r\n    onMount(() => {\r\n        const prevent = (e: DragEvent) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n        window.addEventListener('dragover', prevent)\r\n        window.addEventListener('drop', prevent)\r\n\r\n        return () => {\r\n            window.removeEventListener('dragover', prevent)\r\n            window.removeEventListener('drop', prevent)\r\n        }\r\n    })\r\n\r\n\r\n    let {\r\n        class: className = \"\",\r\n        accept = \"image/jpeg,image/png,image/gif\",\r\n        multiple = true,\r\n        onFileChange,\r\n        description = \"You can upload 4 files. Each up to 2MB. Accepted JPEG, PNG, GIF.\",\r\n    }: FileUploadProps = $props();\r\n\r\n    let inputFiles: File[] = $state([]);\r\n    $effect(() => {\r\n        console.log(\"Current files:\", inputFiles);\r\n    })\r\n\r\n    let isPending = $state(false);\r\n    let isDragActive = $state(false);\r\n\r\n    function addFiles(files: FileList) {\r\n        const newFiles = Array.from(files);\r\n        inputFiles = [...inputFiles, ...newFiles];\r\n        onFileChange?.(inputFiles);\r\n    }\r\n\r\n\r\n    function handleDragEnter(event: DragEvent) {\r\n        event.preventDefault()\r\n        isDragActive = true;\r\n    }\r\n    function handleDragOver(event: DragEvent) {\r\n        event.preventDefault()\r\n        isDragActive = true;\r\n    }\r\n    function handleDragLeave(event: DragEvent) {\r\n        event.preventDefault()\r\n        isDragActive = false;\r\n    }\r\n    function handleDrop(event: DragEvent) {\r\n        isDragActive = false;\r\n        if (!event.dataTransfer?.files?.length) return;\r\n\r\n        addFiles(event.dataTransfer.files);\r\n    }\r\n\r\n    function handleFileChange(event: Event) {\r\n        const input = event.target as HTMLInputElement;\r\n        if (!input.files?.length) return;\r\n\r\n        addFiles(input.files);\r\n    }\r\n    function handleFileDeletion(fileName: string) {\r\n        inputFiles = inputFiles.filter(file => file.name !== fileName);\r\n    }\r\n\r\n</script>\r\n\r\n<div class={cn('w-full flex flex-col items-center gap-4', className)}>\r\n\t<div\r\n\t\tclass={cn(\r\n\t\t\t'border-foreground/50 border border-dashed relative p-4 rounded-sm flex justify-center items-center flex-col cursor-pointer transition-colors bg-muted-foreground/5 hover:bg-muted-foreground/10 ',\r\n\t\t\t{\r\n\t\t\t\t'border-primary/80': isDragActive\r\n\t\t\t}\r\n\t\t)}\r\n\t\trole=\"button\"\r\n\t\ttabindex=\"0\"\r\n\t\tondragenter={handleDragEnter}\r\n\t\tondragover={handleDragOver}\r\n\t\tondragleave={handleDragLeave}\r\n\t\tondrop={handleDrop}\r\n\t\tonkeydown={(e) => e.key === 'Enter' && e.currentTarget.click()}\r\n\t>\r\n\t\t<label\r\n\t\t\tondragenter={(e: DragEvent) => e.stopPropagation()}\r\n\t\t\tondragover={(e: DragEvent) => e.stopPropagation()}\r\n\t\t\tondragleave={(e: DragEvent) => e.stopPropagation()}\r\n\t\t\tondrop={(e: DragEvent) => e.stopPropagation()}\r\n\t\t\tclass={cn(\r\n\t\t\t\t'dark:bg-input/10 flex w-full min-w-72 cursor-pointer flex-col items-center justify-center rounded-lg bg-transparent px-2 py-6 transition-colors',\r\n\t\t\t\t{\r\n\t\t\t\t\t'text-muted-foreground cursor-not-allowed': isPending,\r\n\t\t\t\t\t'opacity-0 pointer-events-none': isDragActive\r\n\t\t\t\t}\r\n\t\t\t)}\r\n\t\t\tin:fly={{ delay: 150, y: 20, duration: 300 }}\r\n\t\t>\r\n\t\t\t<div class=\"my-2\">\r\n\t\t\t\t{#if isPending}\r\n\t\t\t\t\t<IconLoader className=\"size-6 animate-spin\" />\r\n\t\t\t\t{:else}\r\n\t\t\t\t\t<IconUpload className=\"size-6\" />\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"mt-3 space-y-1 text-center\">\r\n\t\t\t\t<p class=\"text-sm font-semibold\">Drag and drop files here</p>\r\n\r\n\t\t\t\t<p class=\"text-muted-foreground max-w-64 text-xs\">\r\n\t\t\t\t\t{#if typeof description === 'string'}\r\n\t\t\t\t\t\t{description}\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t{description?.maxFiles &&\r\n\t\t\t\t\t\t\t`You can upload ${description.maxFiles} file${description.maxFiles !== 1 ? 's' : ''}.`}{' '}\r\n\t\t\t\t\t\t{description?.maxFileSize &&\r\n\t\t\t\t\t\t\t`${description.maxFiles !== 1 ? 'Each u' : 'U'}p to ${description.maxFileSize}.`}{' '}\r\n\t\t\t\t\t\t{description?.fileTypes && `Accepted ${description.fileTypes}.`}\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<input\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\t{accept}\r\n\t\t\t\t{multiple}\r\n\t\t\t\tdisabled={isPending}\r\n\t\t\t\tclass=\"sr-only\"\r\n\t\t\t\tonchange={handleFileChange}\r\n\t\t\t/>\r\n\t\t</label>\r\n\r\n\t\t{#if isDragActive}\r\n\t\t\t<div class=\"pointer-events-none absolute inset-0 rounded-lg\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"dark:bg-accent/40 bg-accent flex size-full flex-col items-center justify-center rounded-lg\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"my-2\">\r\n\t\t\t\t\t\t<IconUpload class=\"size-6\" />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<p class=\"mt-3 text-sm font-semibold\">Drop files here</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\t</div>\r\n\r\n\t{#if inputFiles && inputFiles.length > 0}\r\n\t\t<div class=\"mt-4 w-full space-y-2\">\r\n\t\t\t{#each inputFiles as file (file.name + file.size)}\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"flex relative items-center justify-between rounded-md border bg-background px-3 py-2 text-sm\"\r\n\t\t\t\t\tin:slide\r\n\t\t\t\t\tout:slide\r\n\t\t\t\t>\r\n\t\t\t\t\t<span class=\"truncate\">{file.name}</span>\r\n\t\t\t\t\t<span class=\"text-muted-foreground text-xs\">\r\n\t\t\t\t\t\t{Math.ceil(file.size / 1024)} KB\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<IconXboxXFilled\r\n\t\t\t\t\t\tclass=\"absolute rounded-md text-foreground -translate-y-1/2 top-0 right-0 size-4\"\r\n\t\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\t\tonclick={() => handleFileDeletion(file.name)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t{/each}\r\n\t\t</div>\r\n\t{/if}\r\n</div>\r\n",
			"type": "registry:file",
			"target": "ori/file-upload/file-upload.svelte"
		}
	]
}